{"version":3,"file":"static/js/388.8bc7c72b.chunk.js","mappings":"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","sources":["pages/AddLoanForm.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport {\n  Box,\n  TextField,\n  MenuItem,\n  Button,\n  Typography,\n  Stack,\n  Alert,\n  CircularProgress,\n  IconButton,\n  Tooltip,\n  Paper,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  useTheme,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tabs,\n  Tab,\n  Fade,\n  Stepper,\n  Step,\n  StepLabel,\n  StepConnector,\n  stepConnectorClasses,\n  styled,\n} from \"@mui/material\";\nimport WarningIcon from \"@mui/icons-material/Warning\";\nimport ContactPhoneIcon from \"@mui/icons-material/ContactPhone\";\nimport UploadFileIcon from \"@mui/icons-material/UploadFile\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\n\n// Custom icons for the stepper\nimport AssignmentIcon from '@mui/icons-material/Assignment';\nimport PaidIcon from '@mui/icons-material/Paid';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\n\n// Date picker imports\nimport { AdapterDayjs } from \"@mui/x-date-pickers/AdapterDayjs\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\n\n// Other imports\nimport { useFirestore } from \"../contexts/FirestoreProvider\";\nimport { toast } from \"react-toastify\";\nimport dayjs from \"dayjs\";\nimport Papa from \"papaparse\";\n\n// Options for auto interest duration\nconst interestOptions = [\n  { label: \"1 Week\", value: 1 },\n  { label: \"2 Weeks\", value: 2 },\n  { label: \"3 Weeks\", value: 3 },\n  { label: \"4 Weeks\", value: 4 },\n];\n\nconst getTextFieldStyles = (theme) => ({\n  \"& .MuiOutlinedInput-root\": {\n    \"&.Mui-focused .MuiOutlinedInput-notchedOutline\": {\n      borderColor: theme.palette.secondary.main,\n    },\n    // Smaller padding for a more compact feel\n    \"& .MuiInputBase-input\": {\n      padding: \"10px 12px\",\n      fontSize: \"0.875rem\",\n    },\n  },\n  \"& .MuiInputLabel-root.Mui-focused\": {\n    color: theme.palette.secondary.main,\n  },\n  // Smaller label text\n  \"& .MuiInputLabel-root\": {\n    fontSize: \"0.875rem\",\n    transform: \"translate(12px, 12px) scale(1)\",\n  },\n  \"& .MuiInputLabel-shrink\": {\n    transform: \"translate(12px, -9px) scale(0.75)\",\n  },\n  \"& .MuiFormHelperText-root\": {\n    fontSize: \"0.75rem\",\n  },\n});\n\nconst steps = ['Borrower Details', 'Loan Details', 'Review & Submit'];\n\n// Custom stepper icon styles\nconst ColorlibStepIconRoot = styled('div')(({ theme, ownerState }) => ({\n  backgroundColor: theme.palette.mode === 'dark' ? theme.palette.grey[700] : '#ccc',\n  zIndex: 1,\n  color: '#fff',\n  width: 40, // Smaller icon size\n  height: 40, // Smaller icon size\n  display: 'flex',\n  borderRadius: '50%',\n  justifyContent: 'center',\n  alignItems: 'center',\n  ...(ownerState.active && {\n    backgroundImage: `linear-gradient(136deg, ${theme.palette.primary.main} 0%, ${theme.palette.secondary.main} 100%)`,\n    boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)',\n  }),\n  ...(ownerState.completed && {\n    backgroundImage: `linear-gradient(136deg, ${theme.palette.primary.dark} 0%, ${theme.palette.secondary.dark} 100%)`,\n  }),\n}));\n\nfunction ColorlibStepIcon(props) {\n  const { active, completed, className, icon } = props;\n  const icons = {\n    1: <AssignmentIcon sx={{ fontSize: 20 }} />, // Smaller icon inside\n    2: <PaidIcon sx={{ fontSize: 20 }} />,\n    3: <CheckCircleIcon sx={{ fontSize: 20 }} />,\n  };\n  return (\n    <ColorlibStepIconRoot ownerState={{ completed, active }} className={className}>\n      {icons[String(icon)]}\n    </ColorlibStepIconRoot>\n  );\n}\n\n// Custom step connector styles\nconst CustomStepConnector = styled(StepConnector)(({ theme }) => ({\n  [`&.${stepConnectorClasses.alternativeLabel}`]: {\n    top: 22,\n  },\n  [`&.${stepConnectorClasses.active}`]: {\n    [`& .${stepConnectorClasses.line}`]: {\n      backgroundImage: `linear-gradient(95deg, ${theme.palette.primary.main} 0%, ${theme.palette.secondary.main} 100%)`,\n    },\n  },\n  [`&.${stepConnectorClasses.completed}`]: {\n    [`& .${stepConnectorClasses.line}`]: {\n      backgroundImage: `linear-gradient(95deg, ${theme.palette.primary.dark} 0%, ${theme.palette.secondary.dark} 100%)`,\n    },\n  },\n  [`& .${stepConnectorClasses.line}`]: {\n    height: 3,\n    border: 0,\n    backgroundColor: theme.palette.mode === 'dark' ? theme.palette.grey[800] : '#eaeaf0',\n    borderRadius: 1,\n  },\n}));\n\n/**\n * AutoLoanForm Component\n * Refactored to a multi-step stepper form with refined styling.\n */\nfunction AutoLoanForm() {\n  const theme = useTheme();\n  const { addLoan, addActivityLog, settings } = useFirestore();\n\n  const [activeStep, setActiveStep] = useState(0);\n\n  const [borrower, setBorrower] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [amount, setAmount] = useState(\"\");\n  const [interestDuration, setInterestDuration] = useState(1);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [importLoading, setImportLoading] = useState(false);\n  const [openImportDialog, setOpenImportDialog] = useState(false);\n\n  const [borrowerError, setBorrowerError] = useState(\"\");\n  const [phoneError, setPhoneError] = useState(\"\");\n  const [amountError, setAmountError] = useState(\"\");\n  const [csvErrors, setCsvErrors] = useState([]);\n  const [processedCount, setProcessedCount] = useState(0);\n\n  const [contactPickerSupported, setContactPickerSupported] = useState(false);\n  const fileInputRef = useRef(null);\n\n  useEffect(() => {\n    if (\"contacts\" in navigator && \"select\" in navigator.contacts) {\n      setContactPickerSupported(true);\n    } else {\n      console.warn(\"Contact Picker API not supported in this browser or context.\");\n    }\n  }, []);\n\n  const handleSelectContact = async () => {\n    if (!contactPickerSupported) {\n      toast.warn(\"Your browser does not support picking contacts directly.\");\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const properties = [\"name\", \"tel\"];\n      const options = { multiple: false };\n      const contacts = await navigator.contacts.select(properties, options);\n\n      if (contacts && contacts.length > 0) {\n        const selectedContact = contacts[0];\n        if (selectedContact.name && selectedContact.name.length > 0) {\n          setBorrower(selectedContact.name.join(\" \"));\n        }\n        if (selectedContact.tel && selectedContact.tel.length > 0) {\n          setPhone(selectedContact.tel[0].replace(/\\D/g, \"\"));\n        }\n        toast.success(\"Contact details imported!\");\n      } else {\n        toast.info(\"No contact was selected.\");\n      }\n    } catch (err) {\n      console.error(\"Error accessing contacts:\", err);\n      if (err.name === \"NotAllowedError\" || err.name === \"SecurityError\") {\n        toast.error(\"Permission denied to access contacts. Please grant access in your browser settings.\");\n      } else if (err.name === \"AbortError\") {\n        toast.info(\"Contact selection cancelled.\");\n      } else {\n        toast.error(\"Failed to access contacts. \" + (err.message || \"\"));\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const interestRates = settings?.interestRates || {\n    1: 0.15,\n    2: 0.2,\n    3: 0.3,\n    4: 0.3,\n  };\n\n  const calculateInterest = (principal, weeks) => principal * (interestRates[weeks] || 0);\n\n  const handleBorrowerBlur = () => {\n    if (!borrower.trim() || !/^[a-zA-Z\\s]{2,50}$/.test(borrower.trim())) {\n      setBorrowerError(\"Borrower name must be 2-50 characters, containing only letters and spaces.\");\n    } else {\n      setBorrowerError(\"\");\n    }\n  };\n\n  const handlePhoneBlur = () => {\n    if (!phone.trim() || !/^\\d{10}$/.test(phone.trim())) {\n      setPhoneError(\"Phone number must be exactly 10 digits.\");\n    } else {\n      setPhoneError(\"\");\n    }\n  };\n\n  const handleAmountBlur = () => {\n    const numAmount = Number(amount);\n    if (isNaN(numAmount) || numAmount <= 0) {\n      setAmountError(\"Loan amount must be a valid positive number.\");\n    } else {\n      setAmountError(\"\");\n    }\n  };\n\n  const validateStep = (step) => {\n    let isValid = true;\n    if (step === 0) {\n      handleBorrowerBlur();\n      handlePhoneBlur();\n      if (borrowerError || phoneError || !borrower.trim() || !phone.trim()) {\n        isValid = false;\n      }\n    } else if (step === 1) {\n      handleAmountBlur();\n      if (amountError || !amount.trim()) {\n        isValid = false;\n      }\n    }\n    return isValid;\n  };\n\n  const handleNext = () => {\n    if (validateStep(activeStep)) {\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    } else {\n      toast.error(\"Please correct the errors before proceeding.\");\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleSubmit = async () => {\n    setError(\"\");\n    setLoading(true);\n\n    const principal = Number(amount);\n    const interest = calculateInterest(principal, interestDuration);\n    const totalRepayable = principal + interest;\n    const startDate = dayjs().format(\"YYYY-MM-DD\");\n    const dueDate = dayjs().add(interestDuration * 7, \"day\").format(\"YYYY-MM-DD\");\n\n    try {\n      const loanDocRef = await addLoan({\n        borrower,\n        phone,\n        principal,\n        interest,\n        totalRepayable,\n        startDate,\n        dueDate,\n        status: \"Active\",\n        repaidAmount: 0,\n        interestDuration,\n      });\n\n      await addActivityLog({\n        action: \"Loan Created\",\n        details: `Loan created for ${borrower} (ZMW ${principal.toLocaleString()}) [Loan ID: ${loanDocRef.id}]`,\n        timestamp: new Date().toISOString(),\n      });\n\n      toast.success(`Loan added successfully! Loan ID: ${loanDocRef.id}`);\n\n      if (navigator.vibrate) {\n        navigator.vibrate([100, 50, 100]);\n      }\n\n      setLoading(false); // Reset loading state on success\n\n      setBorrower(\"\");\n      setPhone(\"\");\n      setAmount(\"\");\n      setInterestDuration(1);\n      setActiveStep(0);\n      setBorrowerError(\"\");\n      setPhoneError(\"\");\n      setAmountError(\"\");\n    } catch (err) {\n      console.error(\"Loan creation failed:\", err);\n      setError(\"Failed to add loan. Please try again.\");\n      setLoading(false); // Also reset loading on failure\n    }\n  };\n\n  const displayPrincipal = Number(amount);\n  const displayInterest = calculateInterest(displayPrincipal, interestDuration);\n  const displayTotalRepayable = displayPrincipal + displayInterest;\n\n  const handleCSVImport = (event) => {\n    const file = event.target.files[0];\n    if (!file) {\n      return;\n    }\n\n    setImportLoading(true);\n    setCsvErrors([]);\n    setProcessedCount(0);\n\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      transformHeader: (header) => header.trim(),\n      complete: async (results) => {\n        const importedLoans = results.data;\n        const errors = [];\n        let successCount = 0;\n\n        for (let i = 0; i < importedLoans.length; i++) {\n          const row = importedLoans[i];\n          const lineNumber = i + 2;\n\n          setProcessedCount(i + 1);\n\n          const borrowerName = String(row[\"Borrower Name\"] || \"\").trim();\n          const phoneNumber = String(row[\"Phone Number\"] || \"\").trim();\n          const loanAmount = Number(row[\"Loan Amount (ZMW)\"]);\n          const interestDur = Number(row[\"Interest Duration (Weeks)\"]);\n\n          if (!borrowerName || !/^[a-zA-Z\\s]{2,50}$/.test(borrowerName)) {\n            errors.push(`Row ${lineNumber}: Invalid 'Borrower Name'. Must be 2-50 letters and spaces.`);\n            continue;\n          }\n          if (!phoneNumber || !/^\\d{10}$/.test(phoneNumber)) {\n            errors.push(\n              `Row ${lineNumber}: Invalid 'Phone Number'. It must be 10 digits.`\n            );\n            continue;\n          }\n          if (isNaN(loanAmount) || loanAmount <= 0) {\n            errors.push(\n              `Row ${lineNumber}: Invalid 'Loan Amount (ZMW)'. Must be a positive number.`\n            );\n            continue;\n          }\n          if (\n            isNaN(interestDur) ||\n            !interestOptions.some((opt) => opt.value === interestDur)\n          ) {\n            errors.push(\n              `Row ${lineNumber}: Invalid 'Interest Duration (Weeks)'. Must be 1, 2, 3, or 4.`\n            );\n            continue;\n          }\n\n          const interest = calculateInterest(loanAmount, interestDur);\n          const totalRepayable = loanAmount + interest;\n          const startDate = dayjs().format(\"YYYY-MM-DD\");\n          const dueDate = dayjs().add(interestDur * 7, \"day\").format(\"YYYY-MM-DD\");\n\n          try {\n            await addLoan({\n              borrower: borrowerName,\n              phone: phoneNumber,\n              principal: loanAmount,\n              interest,\n              totalRepayable,\n              startDate,\n              dueDate,\n              status: \"Active\",\n              repaidAmount: 0,\n              interestDuration: interestDur,\n            });\n            successCount++;\n          } catch (addError) {\n            console.error(`Error adding loan from row ${lineNumber}:`, addError);\n            errors.push(\n              `Row ${lineNumber}: Failed to add loan to database. (${\n                addError.message || \"Unknown error\"\n              })`\n            );\n          }\n        }\n\n        setImportLoading(false);\n        setProcessedCount(0);\n\n        if (successCount > 0) {\n          toast.success(`Successfully imported ${successCount} loan(s)!`);\n        }\n        if (errors.length > 0) {\n          setCsvErrors(errors);\n          setError(`CSV Import finished with ${errors.length} error(s). Please review the details below.`);\n          errors.forEach((err) =>\n            toast.error(`Import Error: ${err}`, { autoClose: false })\n          );\n        } else {\n          setOpenImportDialog(false);\n        }\n      },\n      error: (err) => {\n        setImportLoading(false);\n        setOpenImportDialog(false);\n        setProcessedCount(0);\n        setError(\"Failed to parse CSV file: \" + err.message);\n        toast.error(\"CSV parsing error: \" + err.message);\n        console.error(\"PapaParse error:\", err);\n      },\n    });\n  };\n\n  const textFieldStyles = getTextFieldStyles(theme);\n\n  const handleDownloadSample = () => {\n    const headers = '\"Borrower Name\",\"Phone Number\",\"Loan Amount (ZMW)\",\"Interest Duration (Weeks)\"';\n    const sampleData = `\\n\"John Doe\",\"1234567890\",\"1000\",\"1\"\\n\"Jane Smith\",\"0987654321\",\"500\",\"2\"`;\n    const csvContent = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(headers + sampleData);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", csvContent);\n    link.setAttribute(\"download\", \"loan_import_sample.csv\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleCloseImportDialog = () => {\n    setOpenImportDialog(false);\n    setCsvErrors([]);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = null;\n    }\n  };\n\n  const getStepContent = (step) => {\n    switch (step) {\n      case 0:\n        return (\n          <Stack spacing={1.5} sx={{ py: 1.5 }}>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <TextField\n                label=\"Borrower Name\"\n                value={borrower}\n                onChange={(e) => setBorrower(e.target.value)}\n                onBlur={handleBorrowerBlur}\n                fullWidth\n                required\n                inputProps={{ maxLength: 50 }}\n                error={!!borrowerError}\n                helperText={borrowerError}\n                sx={textFieldStyles}\n              />\n              {contactPickerSupported ? (\n                <Tooltip title=\"Import from device contacts\">\n                  <IconButton color=\"secondary\" onClick={handleSelectContact} disabled={loading || importLoading} aria-label=\"import contact\" size=\"small\">\n                    <ContactPhoneIcon />\n                  </IconButton>\n                </Tooltip>\n              ) : (\n                <Tooltip title=\"Your browser does not support the Contact Picker API.\">\n                  <span>\n                    <IconButton color=\"primary\" disabled aria-label=\"import contact not supported\" size=\"small\">\n                      <ContactPhoneIcon />\n                    </IconButton>\n                  </span>\n                </Tooltip>\n              )}\n            </Box>\n            <TextField\n              label=\"Phone Number\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              onBlur={handlePhoneBlur}\n              fullWidth\n              required\n              inputProps={{ maxLength: 10, inputMode: \"numeric\", pattern: \"[0-9]*\" }}\n              error={!!phoneError}\n              helperText={phoneError}\n              sx={textFieldStyles}\n            />\n          </Stack>\n        );\n      case 1:\n        return (\n          <Stack spacing={1.5} sx={{ py: 1.5 }}>\n            <TextField\n              label=\"Loan Amount (ZMW)\"\n              value={amount}\n              onChange={(e) => setAmount(e.target.value)}\n              onBlur={handleAmountBlur}\n              type=\"number\"\n              inputProps={{ min: 1 }}\n              fullWidth\n              required\n              error={!!amountError}\n              helperText={amountError}\n              sx={textFieldStyles}\n            />\n            <TextField\n              select\n              label=\"Interest Duration\"\n              value={interestDuration}\n              onChange={(e) => setInterestDuration(Number(e.target.value))}\n              fullWidth\n              required\n              sx={textFieldStyles}\n            >\n              {interestOptions.map(({ label, value }) => (\n                <MenuItem key={value} value={value}>\n                  {label}\n                </MenuItem>\n              ))}\n            </TextField>\n            <Fade in={displayPrincipal > 0}>\n              <Box sx={{\n                p: 1.5, // Reduced padding\n                bgcolor: theme.palette.mode === 'light' ? theme.palette.secondary.light : theme.palette.secondary.dark,\n                borderRadius: 2,\n                borderLeft: `5px solid ${theme.palette.secondary.main}`,\n              }}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Calculated Interest: ZMW{\" \"}\n                  {displayInterest.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}\n                </Typography>\n                <Typography variant=\"body1\" fontWeight=\"bold\"> {/* Smaller variant */}\n                  Total Repayable: ZMW{\" \"}\n                  {displayTotalRepayable.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}\n                </Typography>\n              </Box>\n            </Fade>\n          </Stack>\n        );\n      case 2:\n        return (\n          <Stack spacing={1.5} sx={{ py: 1.5 }}>\n            <Paper variant=\"outlined\" sx={{ p: 1.5, width: '100%' }}>\n              <Typography variant=\"subtitle2\" gutterBottom>Review Details</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Borrower:</strong> {borrower}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Phone:</strong> {phone}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Principal:</strong> ZMW {displayPrincipal.toLocaleString()}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Interest Duration:</strong> {interestDuration} week{interestDuration > 1 ? 's' : ''}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Calculated Interest:</strong> ZMW {displayInterest.toLocaleString()}</Typography>\n              <Typography variant=\"body2\" fontWeight=\"bold\" display=\"block\"><strong>Total Repayable:</strong> ZMW {displayTotalRepayable.toLocaleString()}</Typography>\n            </Paper>\n          </Stack>\n        );\n      default:\n        return 'Unknown step';\n    }\n  };\n\n  return (\n    <Paper\n      elevation={4}\n      sx={{\n        maxWidth: 500,\n        mx: \"auto\",\n        mt: 2, // Reduced margin top\n        p: 2, // Reduced padding\n        borderRadius: 3,\n        border: (theme) => `1px solid ${theme.palette.divider}`,\n      }}\n    >\n      <Box sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", mb: 2 }}>\n        <Typography variant=\"h6\" fontWeight=\"bold\">Add New Loan (Auto)</Typography>\n        <Tooltip title=\"Import multiple loans from CSV\">\n          <IconButton color=\"secondary\" onClick={() => setOpenImportDialog(true)} disabled={loading || importLoading} aria-label=\"import loans\" size=\"small\">\n            <UploadFileIcon />\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      <Stepper alternativeLabel activeStep={activeStep} connector={<CustomStepConnector />} sx={{ mb: 3 }}>\n        {steps.map((label) => (\n          <Step key={label}>\n            <StepLabel StepIconComponent={ColorlibStepIcon} sx={{ fontSize: '0.875rem' }}>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n\n      {error && (\n        <Alert severity=\"error\" onClose={() => setError(\"\")} sx={{ mb: 1.5, fontSize: '0.875rem' }}>\n          {error}\n        </Alert>\n      )}\n\n      {getStepContent(activeStep)}\n      <Box sx={{ display: 'flex', flexDirection: 'row', pt: 2 }}>\n        <Button\n          color=\"inherit\"\n          disabled={activeStep === 0 || loading || importLoading}\n          onClick={handleBack}\n          sx={{ mr: 1, px: 1, fontSize: '0.875rem' }}\n        >\n          Back\n        </Button>\n        <Box sx={{ flex: '1 1 auto' }} />\n        {activeStep === steps.length - 1 ? (\n          <Button\n            onClick={handleSubmit}\n            variant=\"contained\"\n            color=\"secondary\"\n            disabled={loading || importLoading}\n            startIcon={loading ? <CircularProgress size={16} color=\"inherit\" /> : null}\n            sx={{ fontSize: '0.875rem' }}\n          >\n            {loading ? \"Adding Loan...\" : \"Add Loan\"}\n          </Button>\n        ) : (\n          <Button onClick={handleNext} variant=\"contained\" color=\"secondary\" disabled={loading || importLoading} sx={{ fontSize: '0.875rem' }}>\n            Next\n          </Button>\n        )}\n      </Box>\n\n      {/* Dialog for CSV Import (remains largely unchanged) */}\n      <Dialog open={openImportDialog} onClose={handleCloseImportDialog} maxWidth=\"sm\" fullWidth>\n        <DialogTitle sx={{ py: 1.5, px: 2 }}>\n          <Box sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n            <Typography variant=\"h6\">Import Loans from CSV</Typography>\n            <IconButton onClick={handleCloseImportDialog} aria-label=\"close\" size=\"small\">\n              <CloseIcon />\n            </IconButton>\n          </Box>\n        </DialogTitle>\n        <DialogContent dividers sx={{ p: 2 }}>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1.5 }}>\n            Upload a CSV file with loan data. Ensure the first row contains these exact headers.\n          </Typography>\n          <Paper variant=\"outlined\" sx={{ p: 1, mb: 1.5, bgcolor: \"grey.100\" }}>\n            <Typography variant=\"body2\" component=\"pre\" sx={{ overflowX: \"auto\", whiteSpace: \"pre-wrap\", wordBreak: \"break-all\", fontSize: '0.8rem' }}>\n              \"Borrower Name\",\"Phone Number\",\"Loan Amount (ZMW)\",\"Interest Duration (Weeks)\"\n            </Typography>\n          </Paper>\n          <Button onClick={handleDownloadSample} color=\"primary\" variant=\"outlined\" size=\"small\" startIcon={<FileDownloadIcon />} sx={{ mb: 1.5, fontSize: '0.75rem' }}>\n            Download Sample CSV\n          </Button>\n          {csvErrors.length > 0 && (\n            <Alert severity=\"error\" sx={{ mb: 1.5, fontSize: '0.875rem' }}>\n              <Typography variant=\"subtitle2\" fontWeight=\"bold\">Errors found in CSV file:</Typography>\n              <List dense sx={{ mt: 0.5 }}>\n                {csvErrors.map((err, index) => (\n                  <ListItem key={index} disableGutters sx={{ py: 0, '& .MuiListItemIcon-root': { minWidth: '24px' }}}>\n                    <ListItemIcon><WarningIcon color=\"error\" sx={{ fontSize: '1rem' }} /></ListItemIcon>\n                    <ListItemText primary={err} primaryTypographyProps={{ variant: 'caption' }} />\n                  </ListItem>\n                ))}\n              </List>\n            </Alert>\n          )}\n          <input accept=\".csv\" style={{ display: \"none\" }} id=\"csv-upload-button-dialog\" type=\"file\" onChange={handleCSVImport} ref={fileInputRef} />\n          <label htmlFor=\"csv-upload-button-dialog\">\n            <Button variant=\"contained\" component=\"span\" color=\"secondary\" startIcon={importLoading ? <CircularProgress size={16} color=\"inherit\" /> : <UploadFileIcon />} disabled={importLoading} fullWidth>\n              {importLoading ? `Importing... (${processedCount} processed)` : \"Select CSV File\"}\n            </Button>\n          </label>\n        </DialogContent>\n        <DialogActions sx={{ p: 1 }}>\n          <Button onClick={handleCloseImportDialog} disabled={importLoading} sx={{ fontSize: '0.875rem' }}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n    </Paper>\n  );\n}\n\n/**\n * ManualLoanForm Component\n * Refactored to a multi-step stepper form with refined styling.\n */\nfunction ManualLoanForm() {\n  const theme = useTheme();\n  const { addLoan, addActivityLog } = useFirestore();\n\n  const [activeStep, setActiveStep] = useState(0);\n\n  const [borrower, setBorrower] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [amount, setAmount] = useState(\"\");\n  const [startDate, setStartDate] = useState(dayjs());\n  const [dueDate, setDueDate] = useState(dayjs().add(1, 'week'));\n  const [manualInterestRate, setManualInterestRate] = useState(\"\");\n\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const [borrowerError, setBorrowerError] = useState(\"\");\n  const [phoneError, setPhoneError] = useState(\"\");\n  const [amountError, setAmountError] = useState(\"\");\n  const [startDateError, setStartDateError] = useState(\"\");\n  const [dueDateError, setDueDateError] = useState(\"\");\n  const [manualInterestRateError, setManualInterestRateError] = useState(\"\");\n\n  const [contactPickerSupported, setContactPickerSupported] = useState(false);\n  useEffect(() => {\n    if (\"contacts\" in navigator && \"select\" in navigator.contacts) {\n      setContactPickerSupported(true);\n    } else {\n      console.warn(\"Contact Picker API not supported in this browser or context.\");\n    }\n  }, []);\n\n  const handleSelectContact = async () => {\n    if (!contactPickerSupported) {\n      toast.warn(\"Your browser does not support picking contacts directly.\");\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const properties = [\"name\", \"tel\"];\n      const options = { multiple: false };\n      const contacts = await navigator.contacts.select(properties, options);\n      if (contacts && contacts.length > 0) {\n        const selectedContact = contacts[0];\n        if (selectedContact.name && selectedContact.name.length > 0) {\n          setBorrower(selectedContact.name.join(\" \"));\n        }\n        if (selectedContact.tel && selectedContact.tel.length > 0) {\n          setPhone(selectedContact.tel[0].replace(/\\D/g, \"\"));\n        }\n        toast.success(\"Contact details imported!\");\n      } else {\n        toast.info(\"No contact was selected.\");\n      }\n    } catch (err) {\n      console.error(\"Error accessing contacts:\", err);\n      if (err.name === \"NotAllowedError\" || err.name === \"SecurityError\") {\n        toast.error(\"Permission denied to access contacts. Please grant access in your browser settings.\");\n      } else if (err.name === \"AbortError\") {\n        toast.info(\"Contact selection cancelled.\");\n      } else {\n        toast.error(\"Failed to access contacts. \" + (err.message || \"\"));\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const calculateInterest = (principal, rate) => principal * (rate / 100);\n\n  const handleBorrowerBlur = () => {\n    if (!borrower.trim() || !/^[a-zA-Z\\s]{2,50}$/.test(borrower.trim())) {\n      setBorrowerError(\"Borrower name must be 2-50 characters, containing only letters and spaces.\");\n    } else {\n      setBorrowerError(\"\");\n    }\n  };\n  const handlePhoneBlur = () => {\n    if (!phone.trim() || !/^\\d{10}$/.test(phone.trim())) {\n      setPhoneError(\"Phone number must be exactly 10 digits.\");\n    } else {\n      setPhoneError(\"\");\n    }\n  };\n  const handleAmountBlur = () => {\n    const numAmount = Number(amount);\n    if (isNaN(numAmount) || numAmount <= 0) {\n      setAmountError(\"Loan amount must be a valid positive number.\");\n    } else {\n      setAmountError(\"\");\n    }\n  };\n  const handleManualInterestRateBlur = () => {\n    const numInterestRate = Number(manualInterestRate);\n    if (isNaN(numInterestRate) || numInterestRate < 0 || numInterestRate > 100) {\n      setManualInterestRateError(\"Interest rate must be a number between 0 and 100.\");\n    } else {\n      setManualInterestRateError(\"\");\n    }\n  };\n\n  const validateStep = (step) => {\n    let isValid = true;\n    if (step === 0) {\n      handleBorrowerBlur();\n      handlePhoneBlur();\n      if (borrowerError || phoneError || !borrower.trim() || !phone.trim()) {\n        isValid = false;\n      }\n    } else if (step === 1) {\n      handleAmountBlur();\n      handleManualInterestRateBlur();\n      if (!startDate || !startDate.isValid()) {\n        setStartDateError(\"Invalid start date.\");\n        isValid = false;\n      }\n      if (!dueDate || !dueDate.isValid()) {\n        setDueDateError(\"Invalid due date.\");\n        isValid = false;\n      } else if (startDate && dueDate && dueDate.isBefore(startDate, 'day')) {\n        setDueDateError(\"Due date cannot be before the start date.\");\n        isValid = false;\n      }\n      if (amountError || manualInterestRateError || !amount.trim() || !manualInterestRate.trim()) {\n        isValid = false;\n      }\n    }\n    return isValid;\n  };\n\n  const handleNext = () => {\n    if (validateStep(activeStep)) {\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    } else {\n      toast.error(\"Please correct the errors before proceeding.\");\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleSubmit = async () => {\n    setError(\"\");\n    setLoading(true);\n\n    const principal = Number(amount);\n    const interestRateDecimal = Number(manualInterestRate);\n    const interest = calculateInterest(principal, interestRateDecimal);\n    const totalRepayable = principal + interest;\n\n    const formattedStartDate = startDate.format(\"YYYY-MM-DD\");\n    const formattedDueDate = dueDate.format(\"YYYY-MM-DD\");\n\n    try {\n      const loanDocRef = await addLoan({\n        borrower,\n        phone,\n        principal,\n        interest,\n        totalRepayable,\n        startDate: formattedStartDate,\n        dueDate: formattedDueDate,\n        status: \"Active\",\n        repaidAmount: 0,\n        manualInterestRate: interestRateDecimal,\n      });\n\n      await addActivityLog({\n        action: \"Loan Created (Manual)\",\n        details: `Manual loan created for ${borrower} (ZMW ${principal.toLocaleString()}) [Loan ID: ${loanDocRef.id}]`,\n        timestamp: new Date().toISOString(),\n      });\n\n      toast.success(`Manual loan added successfully! Loan ID: ${loanDocRef.id}`);\n\n      if (navigator.vibrate) {\n        navigator.vibrate([100, 50, 100]);\n      }\n      \n      setLoading(false); // Reset loading state on success\n\n      setBorrower(\"\");\n      setPhone(\"\");\n      setAmount(\"\");\n      setStartDate(dayjs());\n      setDueDate(dayjs().add(1, 'week'));\n      setManualInterestRate(\"\");\n      setActiveStep(0);\n      setBorrowerError(\"\");\n      setPhoneError(\"\");\n      setAmountError(\"\");\n      setStartDateError(\"\");\n      setDueDateError(\"\");\n      setManualInterestRateError(\"\");\n    } catch (err) {\n      console.error(\"Manual loan creation failed:\", err);\n      setError(\"Failed to add manual loan. Please try again.\");\n      setLoading(false); // Also reset loading on failure\n    }\n  };\n\n  const displayPrincipal = Number(amount);\n  const displayInterest = calculateInterest(displayPrincipal, Number(manualInterestRate));\n  const displayTotalRepayable = displayPrincipal + displayInterest;\n\n  const textFieldStyles = getTextFieldStyles(theme);\n\n  const getStepContent = (step) => {\n    switch (step) {\n      case 0:\n        return (\n          <Stack spacing={1.5} sx={{ py: 1.5 }}>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <TextField\n                label=\"Borrower Name\"\n                value={borrower}\n                onChange={(e) => setBorrower(e.target.value)}\n                onBlur={handleBorrowerBlur}\n                fullWidth\n                required\n                inputProps={{ maxLength: 50 }}\n                error={!!borrowerError}\n                helperText={borrowerError}\n                sx={textFieldStyles}\n              />\n              {contactPickerSupported ? (\n                <Tooltip title=\"Import from device contacts\">\n                  <IconButton color=\"secondary\" onClick={handleSelectContact} disabled={loading} aria-label=\"import contact\" size=\"small\">\n                    <ContactPhoneIcon />\n                  </IconButton>\n                </Tooltip>\n              ) : (\n                <Tooltip title=\"Your browser does not support the Contact Picker API.\">\n                  <span>\n                    <IconButton color=\"primary\" disabled aria-label=\"import contact not supported\" size=\"small\">\n                      <ContactPhoneIcon />\n                    </IconButton>\n                  </span>\n                </Tooltip>\n              )}\n            </Box>\n            <TextField\n              label=\"Phone Number\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              onBlur={handlePhoneBlur}\n              fullWidth\n              required\n              inputProps={{ maxLength: 10, inputMode: \"numeric\", pattern: \"[0-9]*\" }}\n              error={!!phoneError}\n              helperText={phoneError}\n              sx={textFieldStyles}\n            />\n          </Stack>\n        );\n      case 1:\n        return (\n          <Stack spacing={1.5} sx={{ py: 1.5 }}>\n            <TextField\n              label=\"Loan Amount (ZMW)\"\n              value={amount}\n              onChange={(e) => setAmount(e.target.value)}\n              onBlur={handleAmountBlur}\n              type=\"number\"\n              inputProps={{ min: 1 }}\n              fullWidth\n              required\n              error={!!amountError}\n              helperText={amountError}\n              sx={textFieldStyles}\n            />\n            <DatePicker\n              label=\"Start Date\"\n              value={startDate}\n              onChange={(newValue) => setStartDate(newValue)}\n              enableAccessibleFieldDOMStructure={false}\n              slots={{ textField: TextField }}\n              slotProps={{\n                textField: {\n                  fullWidth: true,\n                  required: true,\n                  error: !!startDateError,\n                  helperText: startDateError,\n                  sx: textFieldStyles,\n                },\n              }}\n            />\n            <DatePicker\n              label=\"Due Date\"\n              value={dueDate}\n              onChange={(newValue) => setDueDate(newValue)}\n              enableAccessibleFieldDOMStructure={false}\n              slots={{ textField: TextField }}\n              slotProps={{\n                textField: {\n                  fullWidth: true,\n                  required: true,\n                  error: !!dueDateError,\n                  helperText: dueDateError,\n                  sx: textFieldStyles,\n                },\n              }}\n              minDate={startDate || dayjs()}\n              disablePast\n            />\n            <TextField\n              label=\"Interest Rate (%)\"\n              value={manualInterestRate}\n              onChange={(e) => setManualInterestRate(e.target.value)}\n              onBlur={handleManualInterestRateBlur}\n              type=\"number\"\n              inputProps={{ min: 0, max: 100, step: \"0.01\" }}\n              fullWidth\n              required\n              error={!!manualInterestRateError}\n              helperText={manualInterestRateError}\n              sx={textFieldStyles}\n            />\n            <Fade in={displayPrincipal > 0 && manualInterestRate !== \"\"}>\n              <Box sx={{\n                p: 1.5,\n                bgcolor: theme.palette.mode === 'light' ? theme.palette.secondary.light : theme.palette.secondary.dark,\n                borderRadius: 2,\n                borderLeft: `5px solid ${theme.palette.secondary.main}`,\n              }}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Calculated Interest: ZMW{\" \"}\n                  {displayInterest.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}\n                </Typography>\n                <Typography variant=\"body1\" fontWeight=\"bold\">\n                  Total Repayable: ZMW{\" \"}\n                  {displayTotalRepayable.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}\n                </Typography>\n              </Box>\n            </Fade>\n          </Stack>\n        );\n      case 2:\n        return (\n          <Stack spacing={1.5} sx={{ py: 1.5 }}>\n            <Paper variant=\"outlined\" sx={{ p: 1.5, width: '100%' }}>\n              <Typography variant=\"subtitle2\" gutterBottom>Review Details</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Borrower:</strong> {borrower}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Phone:</strong> {phone}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Principal:</strong> ZMW {displayPrincipal.toLocaleString()}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Start Date:</strong> {startDate.format(\"YYYY-MM-DD\")}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Due Date:</strong> {dueDate.format(\"YYYY-MM-DD\")}</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Interest Rate:</strong> {manualInterestRate}%</Typography>\n              <Typography variant=\"caption\" display=\"block\"><strong>Calculated Interest:</strong> ZMW {displayInterest.toLocaleString()}</Typography>\n              <Typography variant=\"body2\" fontWeight=\"bold\" display=\"block\"><strong>Total Repayable:</strong> ZMW {displayTotalRepayable.toLocaleString()}</Typography>\n            </Paper>\n          </Stack>\n        );\n      default:\n        return 'Unknown step';\n    }\n  };\n\n  return (\n    <Paper\n      elevation={4}\n      sx={{\n        maxWidth: 500,\n        mx: \"auto\",\n        mt: 2,\n        p: 2,\n        borderRadius: 3,\n        border: (theme) => `1px solid ${theme.palette.divider}`,\n      }}\n    >\n      <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ mb: 2 }}>Add New Loan (Manual)</Typography>\n      <Stepper alternativeLabel activeStep={activeStep} connector={<CustomStepConnector />} sx={{ mb: 3 }}>\n        {steps.map((label) => (\n          <Step key={label}>\n            <StepLabel StepIconComponent={ColorlibStepIcon} sx={{ fontSize: '0.875rem' }}>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      {error && (\n        <Alert severity=\"error\" onClose={() => setError(\"\")} sx={{ mb: 1.5, fontSize: '0.875rem' }}>\n          {error}\n        </Alert>\n      )}\n\n      {getStepContent(activeStep)}\n      <Box sx={{ display: 'flex', flexDirection: 'row', pt: 2 }}>\n        <Button\n          color=\"inherit\"\n          disabled={activeStep === 0 || loading}\n          onClick={handleBack}\n          sx={{ mr: 1, px: 1, fontSize: '0.875rem' }}\n        >\n          Back\n        </Button>\n        <Box sx={{ flex: '1 1 auto' }} />\n        {activeStep === steps.length - 1 ? (\n          <Button\n            onClick={handleSubmit}\n            variant=\"contained\"\n            color=\"secondary\"\n            disabled={loading}\n            startIcon={loading ? <CircularProgress size={16} color=\"inherit\" /> : null}\n            sx={{ fontSize: '0.875rem' }}\n          >\n            {loading ? \"Adding Loan...\" : \"Add Loan\"}\n          </Button>\n        ) : (\n          <Button onClick={handleNext} variant=\"contained\" color=\"secondary\" disabled={loading} sx={{ fontSize: '0.875rem' }}>\n            Next\n          </Button>\n        )}\n      </Box>\n    </Paper>\n  );\n}\n\n/**\n * Main LoanManagementTabs Component\n * This component now orchestrates the new stepper-based forms with refined styling.\n */\nexport default function LoanManagementTabs() {\n  const [selectedTab, setSelectedTab] = useState(0);\n\n  const handleChangeTab = (event, newValue) => {\n    setSelectedTab(newValue);\n  };\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDayjs}>\n      <Box sx={{ width: \"100%\", mt: 2 }}>\n        <Tabs\n          value={selectedTab}\n          onChange={handleChangeTab}\n          aria-label=\"loan type tabs\"\n          centered\n          sx={{\n            \"& .MuiTabs-indicator\": {\n              backgroundColor: (theme) => theme.palette.secondary.main,\n            },\n            \"& .MuiTab-root\": {\n              color: (theme) => theme.palette.text.secondary,\n              \"&.Mui-selected\": {\n                color: (theme) => theme.palette.secondary.main,\n              },\n              fontSize: '0.875rem',\n              minHeight: '48px',\n              padding: '12px 16px',\n            },\n          }}\n        >\n          <Tab label=\"Auto Loan\" />\n          <Tab label=\"Manual Loan\" />\n        </Tabs>\n        <Box sx={{ p: 2 }}>\n          {selectedTab === 0 && <AutoLoanForm />}\n          {selectedTab === 1 && <ManualLoanForm />}\n        </Box>\n      </Box>\n    </LocalizationProvider>\n  );\n}\n"],"names":["interestOptions","label","value","getTextFieldStyles","theme","borderColor","palette","secondary","main","padding","fontSize","color","transform","steps","ColorlibStepIconRoot","styled","_ref","ownerState","_objectSpread","backgroundColor","mode","grey","zIndex","width","height","display","borderRadius","justifyContent","alignItems","active","backgroundImage","concat","primary","boxShadow","completed","dark","ColorlibStepIcon","props","className","icon","icons","_jsx","AssignmentIcon","sx","PaidIcon","CheckCircleIcon","children","String","CustomStepConnector","StepConnector","_ref2","stepConnectorClasses","alternativeLabel","top","line","border","AutoLoanForm","useTheme","addLoan","addActivityLog","settings","useFirestore","activeStep","setActiveStep","useState","borrower","setBorrower","phone","setPhone","amount","setAmount","interestDuration","setInterestDuration","error","setError","loading","setLoading","importLoading","setImportLoading","openImportDialog","setOpenImportDialog","borrowerError","setBorrowerError","phoneError","setPhoneError","amountError","setAmountError","csvErrors","setCsvErrors","processedCount","setProcessedCount","contactPickerSupported","setContactPickerSupported","fileInputRef","useRef","useEffect","navigator","contacts","console","warn","handleSelectContact","async","properties","options","multiple","select","length","selectedContact","name","join","tel","replace","toast","success","info","err","message","interestRates","calculateInterest","principal","weeks","handleBorrowerBlur","trim","test","handlePhoneBlur","handleAmountBlur","numAmount","Number","isNaN","displayPrincipal","displayInterest","displayTotalRepayable","textFieldStyles","handleCloseImportDialog","current","_jsxs","Paper","elevation","maxWidth","mx","mt","p","divider","Box","mb","Typography","variant","fontWeight","Tooltip","title","IconButton","onClick","disabled","size","UploadFileIcon","Stepper","connector","map","Step","StepLabel","StepIconComponent","Alert","severity","onClose","step","Stack","spacing","py","gap","TextField","onChange","e","target","onBlur","fullWidth","required","inputProps","maxLength","helperText","ContactPhoneIcon","inputMode","pattern","type","min","_ref3","MenuItem","Fade","in","bgcolor","light","borderLeft","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","gutterBottom","getStepContent","flexDirection","pt","Button","handleBack","prevActiveStep","mr","px","flex","interest","totalRepayable","startDate","dayjs","format","dueDate","add","loanDocRef","status","repaidAmount","action","details","id","timestamp","Date","toISOString","vibrate","startIcon","CircularProgress","handleNext","isValid","validateStep","Dialog","open","DialogTitle","CloseIcon","DialogContent","dividers","component","overflowX","whiteSpace","wordBreak","handleDownloadSample","csvContent","encodeURIComponent","headers","link","document","createElement","setAttribute","body","appendChild","click","removeChild","FileDownloadIcon","List","dense","index","ListItem","disableGutters","minWidth","ListItemIcon","WarningIcon","ListItemText","primaryTypographyProps","accept","style","event","file","files","Papa","header","skipEmptyLines","transformHeader","complete","importedLoans","results","data","errors","successCount","i","row","lineNumber","borrowerName","phoneNumber","loanAmount","interestDur","push","some","opt","addError","forEach","autoClose","ref","htmlFor","DialogActions","ManualLoanForm","setStartDate","setDueDate","manualInterestRate","setManualInterestRate","startDateError","setStartDateError","dueDateError","setDueDateError","manualInterestRateError","setManualInterestRateError","rate","handleManualInterestRateBlur","numInterestRate","DatePicker","newValue","enableAccessibleFieldDOMStructure","slots","textField","slotProps","minDate","disablePast","max","interestRateDecimal","formattedStartDate","formattedDueDate","isBefore","LoanManagementTabs","selectedTab","setSelectedTab","LocalizationProvider","dateAdapter","AdapterDayjs","Tabs","handleChangeTab","centered","text","minHeight","Tab"],"sourceRoot":""}